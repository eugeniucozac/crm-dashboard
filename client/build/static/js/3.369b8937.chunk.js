(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{132:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),s=a(66),c=a(50),u=a(44),l=a(52),i=function(e){var t=e.name,a=e.value,n=e.label,i=e.onChange;e.row;return r.a.createElement(s.a,null,r.a.createElement(c.a,{as:u.a},r.a.createElement("label",{className:"ms-checkbox-wrap"},r.a.createElement(l.a,{type:"checkbox",onChange:i,className:"form-check-input ".concat(a?"checked":""),name:t,value:a}),r.a.createElement("i",{className:"ms-checkbox-check"})),r.a.createElement("span",null,n)))}},142:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return f})),a.d(t,"h",(function(){return p})),a.d(t,"g",(function(){return g})),a.d(t,"j",(function(){return h}));var n=a(20),r=a(2),s=a(10),c=function(e){return e.issue.data},u=function(e){return e.issue.loading},l=function(e){return e.issue.error},i=function(e,t){return t?e.issue.data.filter((function(e){return e.status.id===t})):e.issue.data},o=function(e,t,a){return function(e,t){return e.issue.data.filter((function(e){return e.category.id===t}))}(e,a).filter((function(e){return e.hardwareId==t}))},m=function(e,t,a){return function(e,t){return e.issue.data.filter((function(e){return e.category.name===t}))}(e,a).filter((function(e){return e.hardwareId==t}))},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a&&n?m(e,a,n):i(e,t)},f=function(e){return e.issueMessage.data},p=function(e){return e.issueMessage.loading},g=function(e){return e.issueMessage.error},h=function(e){return e.issue.data.reduce((function(e,t,a){var c=e[t.category.name],u=[];if(Array.isArray(c)){if(c.find((function(e){return e.id===t.hardwareId})))return e;u=[].concat(Object(s.a)(c),[{id:t.hardwareId,name:t.hardwareName}])}else u=[{id:t.hardwareId,name:t.hardwareName}];return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},t.category.name,u))}),{})}},146:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n),s=a(155),c=a.n(s),u=function(){return r.a.createElement("div",{className:c.a.spinner},r.a.createElement("div",null),r.a.createElement("div",{className:c.a.rect2}),r.a.createElement("div",{className:c.a.rect3}),r.a.createElement("div",{className:c.a.rect4}),r.a.createElement("div",{className:c.a.rect5}))}},150:function(e,t,a){"use strict";var n=a(3),r=a.n(n),s=a(4),c=a(1),u=a(7),l=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({url:"/api/issue",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({url:"/api/issue",method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({url:"/api/issue/".concat(t),method:"PUT",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({url:"/api/issue/".concat(t,"/message"),method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({url:"/api/issue/".concat(t,"/message"),method:"POST",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();a.d(t,"e",(function(){return f})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return h})),a.d(t,"b",(function(){return E})),a.d(t,"f",(function(){return v}));var f=function(){return function(){var e=Object(s.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.f.GET_ISSUES_REQUEST}),e.prev=1,e.next=4,l();case 4:a=e.sent,t({type:c.f.GET_ISSUES_SUCCESS,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:c.f.GET_ISSUES_FAILURE,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:n=t.sent,a({type:c.f.ADD_ISSUE_SUCCESS,payload:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),a({type:c.f.ADD_ISSUE_FAILURE,payload:t.t0}),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o(e,t);case 3:s=a.sent,n({type:c.f.CHANGE_STATUS_SUCCESS,payload:{data:s,id:e}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:c.f.CHANGE_STATUS_FAILURE,payload:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:c.f.GET_MESSAGES_REQUEST}),t.prev=1,t.next=4,m(e);case 4:n=t.sent,a({type:c.f.GET_MESSAGES_SUCCESS,payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:c.f.GET_MESSAGES_FAILURE,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d(e,t);case 3:s=a.sent,n({type:c.f.ADD_MESSAGE_SUCCESS,payload:s}),a.next=11;break;case 7:throw a.prev=7,a.t0=a.catch(0),n({type:c.f.ADD_MESSAGE_FAILURE,payload:a.t0}),a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},v=function(){return function(e){e({type:c.f.RESET_ERRORS_SUCCESS})}}},155:function(e,t,a){e.exports={spinner:"Loading_spinner__7liJt","ms-stretchdelay":"Loading_ms-stretchdelay__1MGkv",rect2:"Loading_rect2__cutuo",rect3:"Loading_rect3__28rOG",rect4:"Loading_rect4__2DiIa",rect5:"Loading_rect5__2Ui2-"}},164:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s}));var n=["1 Year","2 Years","3 Years","4 Years","5 Years"],r=[{id:1,name:"Open"},{id:2,name:"Close"}],s=[{id:1,name:"Hardware"},{id:2,name:"Kit"}]},238:function(e,t,a){"use strict";var n=a(3),r=a.n(n),s=a(4),c=a(20),u=a(14),l=a(15),i=a(17),o=a(16),m=a(0),d=a.n(m),f=a(13),p=a(30),g=a(150),h=a(137),E=a(47),v=a(46),b=a(142),y=a(22),S=a(332),O=a(130),I=a(294),j=a(295),w=a(126),N=a(21),C=a(39),k=a(132),_=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.resetIssueErrors()}},{key:"render",value:function(){var e=this.props,t=e.toggleIssue,a=e.consultants,n=e.addIssue,r=e.onChange,s=e.isFaulty,c=e.errors,u=e.categoryName;return d.a.createElement(S.a,{show:t,onHide:function(){return t(null)},size:"lg",centered:!0},d.a.createElement(O.a,{noValidate:!0,onSubmit:n},d.a.createElement(S.a.Header,{className:"bg-primary",closeButton:!0},d.a.createElement("h5",{className:"modal-title has-icon text-white"},d.a.createElement(p.r,null),"Create issue")),d.a.createElement(I.a,null,d.a.createElement(N.a,{label:"To:",placeholder:a.filter((function(e){return"Technical manager"===e.role.name})).map((function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)})),disabled:!0}),d.a.createElement(N.a,{name:"title",label:"Title",placeholder:"Title of issue",onChange:r,error:c&&c.data.title}),d.a.createElement(C.a,{name:"message",label:"Describe your issue",onChange:r,error:c&&c.data.message}),"Kit"===u&&d.a.createElement(k.a,{name:"isFaulty",value:s,label:"Item is is faulty",onChange:r})),d.a.createElement(j.a,null,d.a.createElement(w.a,{variant:"secondary",className:"swal2-styled btn-light",onClick:function(){return t(null)}},"Cancel"),d.a.createElement(w.a,{variant:"primary",type:"submit",className:"swal2-confirm swal2-styled"},"Add"))))}}]),a}(m.Component),x=Object(f.b)((function(e){return{errors:Object(b.f)(e)}}),{resetIssueErrors:g.f})(_),M=a(37),A=a.n(M),T=a(333),U=a(323),F=a(164),G=a(10),L=a(50),D=a(51),R=a(52),P=function(e){var t=e.toggleMessage,a=e.consultants,n=e.addMessage,r=e.onChange,s=e.error;return d.a.createElement(S.a,{show:t,onHide:function(){return t(null)},size:"lg",centered:!0},d.a.createElement(O.a,{noValidate:!0,onSubmit:n},d.a.createElement(S.a.Header,{className:"bg-primary",closeButton:!0},d.a.createElement("h5",{className:"modal-title has-icon text-white"},d.a.createElement(p.r,null),"Reply Message:")),d.a.createElement(I.a,null,d.a.createElement(L.a,null,d.a.createElement(D.a,null,"Cc: (Optional)"),d.a.createElement(R.a,{as:"select",multiple:!0,name:"consultants",onChange:r},a.map((function(e){var t=e.id,a=e.lastName,n=e.firstName;return d.a.createElement("option",{key:t,value:t},n," ",a)})))),d.a.createElement(N.a,{name:"title",label:"Title",placeholder:"Title of message",onChange:r,error:s&&s.data.title}),d.a.createElement(C.a,{name:"message",label:"Message",onChange:r,error:s&&s.data.message})),d.a.createElement(j.a,null,d.a.createElement(w.a,{variant:"secondary",onClick:function(){return t(null)}},"Cancel"),d.a.createElement(w.a,Object(c.a)({variant:"primary",type:"submit"},"type","submit"),"Send Message"))))},H=a(146),Y=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={createMessage:null,consultants:[]},e.onChange=function(t){"consultants"==t.target.name?e.setState({consultants:Array.from(t.target.selectedOptions,(function(e){return parseInt(e.value)}))}):e.setState(Object(c.a)({},t.target.name,t.target.value))},e.toggleMessage=function(t){e.setState({createMessage:t})},e.addMessage=function(){var t=Object(s.a)(r.a.mark((function t(a){var n,s,c,u,l,i,o,m,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,s=n.addIssueMessage,c=n.consultantId,u=n.issueId,l=n.consultantsManagers,i=e.state,o=i.title,m=i.message,d=i.consultants,t.prev=3,t.next=6,s(u,{fromConsultantId:c,title:o,message:m,statusId:1,consultants:Object(G.a)(new Set([].concat(Object(G.a)(l),Object(G.a)(d))))});case 6:e.setState({createMessage:null}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getIssueMessages(this.props.issueId),this.props.getConsultants()}},{key:"render",value:function(){var e=this,t=this.props,a=t.messages,n=t.issueId,r=t.consultants,s=t.loading,c=t.error,u=this.state.createMessage;return s?d.a.createElement(H.a,null):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"justify-content-end row"},d.a.createElement("ul",{className:"ms-scrollable ps ps--active-y col-9"},a.length?a.map((function(e){var t=e.title,a=e.createdAt,n=e.message,r=e.fromConsultant,s=r.firstName,c=r.lastName;return d.a.createElement("li",{className:"media ms-email clearfix mb-1"},d.a.createElement("div",{className:"ms-email-img mr-3 "},d.a.createElement("div",{className:"ms-img-round-small"})),d.a.createElement("div",{className:"media-body ms-email-details"},d.a.createElement("h6",{className:"ms-email-subject"},t," \xa0 [\xa0",d.a.createElement("strong",null,s," ",c),"\xa0]"),d.a.createElement("span",{className:"ms-email-time"},A()(a).format("LLL")),d.a.createElement("p",{className:"ms-email-msg"},n)))})):null),d.a.createElement("div",{className:"col-12"},d.a.createElement(w.a,{className:"add-issue mt-2",onClick:function(){return e.toggleMessage(n)}},d.a.createElement(p.o,null)),u&&d.a.createElement(P,{toggleMessage:this.toggleMessage,consultants:r,addMessage:this.addMessage,onChange:this.onChange,error:c}))))}}]),a}(m.Component),K=Object(f.b)((function(e,t){return{loading:Object(b.h)(e),error:Object(b.g)(e),messages:Object(b.a)(e,t.issueId),consultants:Object(v.b)(e),consultantsManagers:Object(v.c)(e),consultantId:Object(y.d)(e)}}),{getConsultants:E.b,getIssueMessages:g.d,addIssueMessage:g.b})(Y),B=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={issueId:null},e.showMessages=function(t){e.setState({issueId:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.changeIssueStatus,n=t.issue.consultant,r=n.firstName,s=n.lastName,c=t.issue,u=t.roleName,l=this.state.issueId,i=1===c.status.id?F.c[1]:F.c[0];return d.a.createElement("li",{className:"one-issue"},d.a.createElement("div",{className:"media ms-email clearfix",onClick:function(){return e.showMessages(c.id)}},d.a.createElement("div",{className:"ms-email-img mr-3 "},d.a.createElement("div",{className:"ms-img-round"},r.charAt(0)," ",s.charAt(0))),d.a.createElement("div",{className:"media-body ms-email-details"},d.a.createElement("h6",{className:"ms-email-sender"},c.title," \xa0",d.a.createElement("i",null,r," ",s),d.a.createElement("span",{className:"ms-email-time"},A()(c.createdAt).format("LLL"))),d.a.createElement("p",{className:"ms-email-msg"},c.message))),("admin"===u||"technical-manager"===u)&&d.a.createElement(T.a,{className:"closeIssue"},d.a.createElement(T.a.Toggle,null,d.a.createElement(p.g,null)),d.a.createElement(T.a.Menu,null,d.a.createElement(U.a,{onClick:function(){return a(c.id,{statusId:i.id})}},i.name))),l&&d.a.createElement(K,{issueId:l}))}}]),a}(m.Component),J=a(66),V=a(44),z=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currentPage:1},e.pageSwitcher=function(t){"next"===t?e.setState({currentPage:e.state.currentPage+1}):e.setState({currentPage:e.state.currentPage-1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.inventoryId,t.issues),n=10*this.state.currentPage,r=n-10,s=[];s=a.length&&a.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})).slice(r,n);return d.a.createElement(d.a.Fragment,null,s.length?d.a.createElement(d.a.Fragment,null,d.a.createElement("ul",{className:"ms-scrollable ps ps--active-y"},s.map((function(t){return d.a.createElement(B,Object.assign({issue:t},e.props))}))),d.a.createElement(J.a,{className:"pagination issues"},d.a.createElement(V.a,null,d.a.createElement("div",{className:"arrows d-flex justify-content-end"},d.a.createElement(w.a,{onClick:function(){return e.pageSwitcher("prev")},disabled:0===r},d.a.createElement(p.d,null)),d.a.createElement(w.a,{onClick:function(){return e.pageSwitcher("next")},disabled:n>=a.length},d.a.createElement(p.e,null)))))):d.a.createElement("div",{className:"media ms-email clearfix"},d.a.createElement("div",{className:"media-body ms-email-details"},d.a.createElement("p",{className:"ms-email-msg"},"No issues..."))))}}]),a}(m.Component),Q=a(297),W=a.n(Q),q=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={isFaulty:!1,createIssue:null,status:"Open"},e.onChange=function(t){e.setState(Object(c.a)({},t.target.name,t.target.value)),"checkbox"===t.target.type&&(t.target.checked?e.setState({isFaulty:!0}):e.setState({isFaulty:!1}))},e.toggleIssue=function(t){e.setState({createIssue:t})},e.changeStatus=function(t){e.setState({status:t})},e.addIssue=function(){var t=Object(s.a)(r.a.mark((function t(a){var n,s,c,u,l,i,o,m,d,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,s=n.addIssue,c=n.consultantId,u=n.inventory,l=n.updateKit,i=n.category,o=e.state,m=o.title,d=o.message,f=o.isFaulty,t.prev=3,t.next=6,s({consultantId:c,hardwareId:u.id,hardwareName:u.name,statusId:1,categoryId:i.id,title:m,message:d});case 6:"Kit"===i.name&&l(u.id,{isFaulty:f}),e.setState({createIssue:null}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getIssues(),this.props.getConsultants()}},{key:"render",value:function(){var e=this,t=this.props,a=t.inventory,n=t.consultants,r=t.issuesByCatAndId,s=t.roleName,c=t.addViewIssue,u=t.loading,l=t.category,i=t.resetIssueErrors,o=this.state,m=o.isFaulty,f=o.createIssue,g=o.status,h=r.filter((function(e){return e.status.name===g}));return u?d.a.createElement(H.a,null):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"ms-email-content"},d.a.createElement("ul",{class:"nav nav-tabs d-flex mb-4 justify-content-center"},"admin"!==s&&"technical-manager"!==s||!r.length?null:d.a.createElement(d.a.Fragment,null,d.a.createElement("li",null,d.a.createElement(w.a,{className:W.a.open,onClick:function(){return e.changeStatus("Open")}},"Open")),d.a.createElement("li",null,d.a.createElement(w.a,{className:W.a.closed,onClick:function(){return e.changeStatus("Closed")}},"Closed")))),d.a.createElement(w.a,{className:"swal2-close",onClick:function(){return c(null)}},"\xd7"),d.a.createElement(z,Object.assign({},this.props,{issues:h}))),d.a.createElement(w.a,{className:"float-right add-issue",onClick:function(){return e.toggleIssue(a.id)}},d.a.createElement(p.m,null)),f&&d.a.createElement(x,{toggleIssue:this.toggleIssue,consultants:n,addIssue:this.addIssue,onChange:this.onChange,isFaulty:m,resetIssueErrors:i,categoryName:l.name}))}}]),a}(m.Component);t.a=Object(f.b)((function(e,t){return{roleName:Object(y.f)(e),loading:Object(b.i)(e),consultants:Object(v.b)(e),consultantId:Object(y.d)(e),issuesByCatAndId:Object(b.c)(e,t.inventory.id,t.category.id)}}),{getConsultants:E.b,getIssues:g.e,updateKit:h.u,updateHardware:h.t,addIssue:g.a,changeIssueStatus:g.c})(q)},297:function(e,t,a){e.exports={open:"Issues_open__AgSsl",closed:"Issues_closed__2kboY"}}}]);
//# sourceMappingURL=3.369b8937.chunk.js.map